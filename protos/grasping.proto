syntax = "proto3";

import "geometry.proto";
import "joint.proto";
import "metadata.proto";

package reachy.sdk.grasping;

message PoseStamped {
    reachy.sdk.metadata.Header header = 1;
    reachy.sdk.geometry.Pose pose = 2;
}

message GraspPose {
    string class_id = 1;
    string grasp_id = 2;
    PoseStamped grasp_pose = 3;
    double grasp_quality = 4;
    double grasp_opening = 5;
    repeated double margins = 6;
}

message GraspPoseArray {
    repeated GraspPose grasp_poses = 1;
}

message SpaceGraspPose {
    PoseStamped pose = 1;
    reachy.sdk.joint.JointState joints = 2;
}

message ReachableGraspTriplet {
    string class_id = 1;
    string grasp_id = 2;
    SpaceGraspPose pregrasp_pose = 3;
    SpaceGraspPose grasp_pose = 4;
    SpaceGraspPose postgrasp_pose = 5;
    double grasp_quality = 6;
    double grasp_opening = 7;
}

message ReachableGraspTripletArray {
    repeated ReachableGraspTriplet reachable_grasp_triplets = 1;
}

message ReachabilityAck {
    bool reachable = 1;
}

service GraspingService {
    rpc GetReachability(SpaceGraspPose) returns (ReachabilityAck);
}